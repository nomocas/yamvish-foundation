!function t(e,n,i){function r(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return r(n?n:t)},c,c.exports,t,e,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e,n){yamvish=t("yamvish"),t("../yamvish-foundation/lib/api"),$(window).on("changed.zf.mediaquery",function(t,e,n){console.log("mediaquery change : ",e,n)}),$(document).foundation();var i=yamvish("foundation"),r=i.h1(i.icon("link")," Foundation-yamvish playground").h2(i.icon("link")," Foundation-yamvish playground").h3(i.icon("link")," Foundation-yamvish playground").h4(i.icon("link")," Foundation-yamvish playground").hollowButton("my new button","success").br().simpleButton("my new button","secondary").switchButton("foo","my switch").inlineColoredLabelInputButton({label:"$",type:"number",required:!0,placeholder:"some money values"}).inlineLabelInputRow({label:"my label",type:"text",required:!0,id:"bloupi-goldberg",placeholder:"some money values"}).primaryCallout(!0,"ho hisss allez au pieu").secondaryCallout(!0,"ho hisss allez au pieu").successCallout(!0,"ho hisss allez au pieu").tooltip("youpla title","lorem ipsum...").fieldSet("my test",i.radio({name:"test",value:"red"}).radio({name:"test",value:"blauw"})).thumbnail("http://lorempixel.com/100/200","my cool image").br().roundedThumbnail("http://lorempixel.com/100/100","my cool image").tag("select",i.option("fr","FR").option("en","EN")).tag("select",i.css("width","auto").option("fr","FR").option("en","EN")).br().fileUploadButton("bloupi","your file to upload").productCard("My product","76$","http://lorempixel.com/400/400","lorem ipsum...").uikitModal("myModal",i.h1("Lorem ipsum...")).br().secondaryButton("open uikit modal",i.clickToAgora("myModal:toggle")).br().primaryLabel("my label").secondaryLabel("my label").successLabel("my label").warningLabel("my label").alertLabel("my label").br().primaryBadge("2").secondaryBadge("2").successBadge("2").warningBadge("2").alertBadge("2").br().icon("link").br().buttonGroup(i.simpleButton("simple").simpleButton("ok","success").hollowButton("hollowed","success")).br().aHollowButton("#","foooo","error",i.click(function(t){t.preventDefault(),i.tooltip("youpla foooooo","lorem ipsum...").warningCallout(!0,"roooooo").toContainer().appendTo("#app2")})).br().sidePanel({name:"testLeftPanel",side:"left",width:"250px",ms:200,content:i.background("http://lorempixel.com/400/400").buttonGroup(i.simpleButton("simple").simpleButton("ok","success").hollowButton("hollowed","success")).thumbnail("http://lorempixel.com/100/200","my cool image").br().roundedThumbnail("http://lorempixel.com/100/100","my cool image")}).sidePanel({content:"hello world",name:"testRightPanel",side:"right",width:"250px",ms:200}).sidePanel({name:"testUpPanel",side:"top",height:"200px",ms:200,content:i.buttonGroup(i.simpleButton("simple").simpleButton("ok","success").hollowButton("hollowed","success"))}).sidePanel({content:"hello world",name:"testBottomPanel",side:"bottom",height:"200px",ms:200}).buttonGroup(i.successButton("toggle left panel",i.clickToAgora("testLeftPanel:toggle")).warningButton("toggle right panel",i.clickToAgora("testRightPanel:toggle")).successHollowButton("toggle up panel",i.clickToAgora("testUpPanel:toggle")).alertButton("toggle bottom panel",i.clickToAgora("testBottomPanel:toggle"))).buttonGroup(i.simpleButton("confirm panel","success",i.clickToAgora("dialog:confirm:show",{title:"Are you sure ?",message:"please confirm.",callback:function(t){console.log("confirm validated : ",t)}})).hollowButton("alert panel","alert",i.clickToAgora("dialog:alert:show",{title:"Some alert",message:"lorem ispum"}))).successDialog("hooooo").alertDialog("oups !").primaryDialog("oups !").secondaryDialog("oups !").warningDialog("oups !").confirmPanel().alertPanel(),o=new yamvish.Context({});r.toContainer(o).mount("#app")},{"../yamvish-foundation/lib/api":29,yamvish:4}],2:[function(t,e,n){"undefined"!=typeof navigator?e.exports={isMac:navigator.platform.indexOf("Mac")>-1,isWin:navigator.platform.indexOf("Win")>-1,isMacLike:!!navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i),isIOS:!!navigator.platform.match(/(iPhone|iPod|iPad)/i),isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}:e.exports={}},{}],3:[function(t,e,n){function i(t){t.__yContainer__?t.remount():t.transitionIn&&t.transitionIn()}function r(t){return new Promise(function(e){t.__yContainer__?t.unmount(!0,function(){e(!0)}):t.transitionOut?t.transitionOut(e):e(!0)})}function o(t){var e;t.transitionChildren=[],t.addWitness("transition"),t.transitionIn=function(t){this.closing=!1,e&&clearTimeout(e),e=null,this.transitionChildren.forEach(i)},t.transitionOut=function(n){this.closing=!0,e&&clearTimeout(e),Promise.all(this.transitionChildren.map(r)).then(function(){t.closing&&(t.closing=!1,n&&n(!0))})},t.beforeUnmount(function(t){this.transitionOut(t)}),t.on("mounted",function(){e&&clearTimeout(e),e=setTimeout(function(){t.transitionIn()},15)}),t.binds=t.binds||[],t.binds.push(function(){t.transitionChildren=null})}function s(t,e,n){if(!t)throw new Error("yamvish transition need dome node to apply animation !");var i;e.delay=e.delay||5,e.delay=Math.max(e.delay,5),n.initStyles&&n.initStyles(t,n,e),t.transitionIn=function(r){t.closing=!1,i&&clearTimeout(i),i=setTimeout(function(){n.open(t,void 0!==r?r:e.max)},e.delay)},t.transitionOut=function(r){t.closing=!0,i&&clearTimeout(i),n.close?i=n.close(t,e.ms||400,function(){t.closing=!1,r(!0)}):(t.closing=!1,r(!0))}}function a(t){if(t.transitionChildren||o(t),!t.parent)throw new Error("could not bind transition to parent container : no parent found");t.parent.transitionChildren||o(t.parent),t.parent.transitionChildren.push(t),t.parentBinded=!0}function u(t){return function(e){return e=e||{},this.dom(function(n,i,r,a){a.transitionChildren||o(a),i.__yContainer__?i===a?a.mounted?(s(i.firstChild,e,t),a.transitionChildren.push(i.firstChild)):i.once("mount",function(){s(i.firstChild,e,t),a.transitionChildren.push(i.firstChild)}):a.transitionChildren.push(i):(s(i,e,t),a.transitionChildren.push(i)),a.mounted&&i.transitionIn()})}}function l(t,e,n){t.style.overflow="hidden",t.style[e.styleMax]=0,t.style[e.prop]=n.max,t.style.opacity=0,t.style.transition=e.transitionProp+" "+(n.ms||400)+"ms "+(n.ease||"ease-in-out")}function c(t,e,n){t.style.opacity=0,t.style.transition="opacity "+(n.ms||400)+"ms "+(n.ease||"ease-in-out")+" 0s"}var h=t("yamvish");e.exports=h.toAPI("transition",{bindTransitionToParent:function(){return this.dom(function(t,e,n,i){i.parentBinded||a(i)})},slideUp:u({prop:"height",transitionProp:"max-height",styleMax:"maxHeight",close:function(t,e,n){return t.style.maxHeight="0",setTimeout(function(){t.style.opacity="0",n&&n()},e)},open:function(t,e){t.style.maxHeight=e,t.style.opacity="1"},initStyles:l}),slideLeft:u({prop:"width",transitionProp:"max-width",styleMax:"maxWidth",close:function(t,e,n){return t.style.maxWidth="0",setTimeout(function(){t.style.opacity="0",n&&n()},e)},open:function(t,e){t.style.maxWidth=e,t.style.opacity="1"},initStyles:l}),fade:u({close:function(t,e,n){return t.style.opacity="0",setTimeout(function(){t.style.opacity="0",n&&n()},e)},open:function(t,e){t.style.opacity=e||"1"},initStyles:c}),fadeIn:u({close:function(t,e,n){t.style.opacity="0",n&&n()},open:function(t,e){t.style.opacity=e||"1"},initStyles:c})})},{yamvish:4}],4:[function(t,e,n){var i=t("./lib/api"),r=function(t){return t?i.initializers[t]:new r.Template};r.env=t("./lib/env"),r.utils=t("./lib/utils");var o=t("./lib/context");r.Context=o.Context,r.Env=o.Env,r.ContextEacher=t("./lib/context-eacher"),r.Filter=t("./lib/filter");var s=t("./lib/interpolable");r.interpolable=s.interpolable,r.Interpolable=s.Interpolable,r.Template=t("./lib/template"),r.toAPI=function(t,e){return i.toAPI(t,e)},r.extendAPI=function(t,e,n){return i.extendAPI(t,e,n)},r.initializer=function(t){return i.initializer(t)},r.init=i.initializers.yamvish,r.elenpi=t("elenpi"),r.listenerParser=t("./lib/parsers/listener-call"),r.html=t("./lib/parsers/html-to-template"),t("./lib/output-engine/dom/engine"),r.Container=t("./lib/output-engine/dom/container"),r.Error=t("nomocas-utils/lib/error");var a=t("nomocas-webutils/lib/plateform");for(var u in a)r[u]=a[u];e.exports=r},{"./lib/api":5,"./lib/context":7,"./lib/context-eacher":6,"./lib/env":8,"./lib/filter":9,"./lib/interpolable":10,"./lib/output-engine/dom/container":11,"./lib/output-engine/dom/engine":13,"./lib/parsers/html-to-template":16,"./lib/parsers/listener-call":17,"./lib/template":21,"./lib/utils":22,elenpi:23,"nomocas-utils/lib/error":27,"nomocas-webutils/lib/plateform":2}],5:[function(t,e,n){function i(t,e){return function(){var n=new e;return n[t].apply(n,arguments)}}var r=t("./template"),o=e.exports={classes:{yamvish:r},initializers:{yamvish:{}},extendClass:function(t){var e=this.classes[t];if(!e)throw new Error("Yamvish API fail to extends : nothing found with : "+t);var n=function(){e.call(this)};return n.prototype=new e,n},getAPIMethod:function(t){if(t.forEach||(t=t.split(":")),2!==t.length)throw new Error("yamvish method call badly formatted : "+t.join(":"));var e=this.classes[t[0]];if(!e)throw new Error('no api found with "'+t.join(":")+'"');var n=e.prototype[t[1]];if(!n)throw new Error('no API method found with "'+t.join(":")+'"');return n},toAPI:function(t,e,n){if(!this.classes[t])return this.extendAPI("yamvish",t,e);var r=this.classes[t],o=r.prototype,s=this.initializers[t]=this.initializers[t]||{};return n?(o[e]=n,s[e]=i(e,r)):Object.keys(e).forEach(function(t){"__yTemplate__"!==t&&"_queue"!==t&&(o[t]=e[t],s[t]=i(t,r))}),this},extendAPI:function(t,e,n){var r=this.classes[e]=this.extendClass(t),o=r.prototype,s=this.initializers[e]={};for(var a in o)"__yTemplate__"!==a&&"_queue"!==a&&(s[a]=i(a,r));return n&&this.toAPI(e,n),this},initializer:function(t){return this.initializers[t||"yamvish"]}};r.getAPIMethod=function(t){return o.getAPIMethod(t)},r.prototype.api=function(t){var e=o.classes[t];if(!e)throw new Error("no api found with : "+t);var n=new e;return n._queue=this._queue,n};var s=o.initializers.yamvish;for(var a in r.prototype)"__yTemplate__"!==a&&"_queue"!==a&&(s[a]=i(a,r))},{"./template":21}],6:[function(t,e,n){function i(t,e){for(var n,i=e,r=t.children.length;i<r;++i)n=t.children[i],n.index=i,n.path=t.path+"."+i}var r=t("./utils"),o=t("nomocas-utils/lib/emitter"),s=t("./context").Context,a=function(t,e,n){if(this.parent=t,this.children=[],"string"==typeof e){var i=this;this.path=e;t.subscribe(e,function(t,e,n,r){switch(e){case"set":n.length?i.updateItem(e,n,t,r):i.updateArray(t);break;case"push":n.length?i.updateItem(e,n,t,r):i.pushItem(t);break;case"displaceItem":n.length?i.updateItem(e,n,t,r):i.displaceItem(t);break;case"insertItem":n.length?i.updateItem(e,n,t,r):i.insertItem(t);break;case"delete":n.length?1===n.length?i.deleteItem(r):i.updateItem(e,n,t,r):i.updateArray([])}},!0),e=t.get(e)}this.updateArray(e),n&&n(this,t)};a.prototype=new o;var u={getItem:function(t){return this.children[t]},createItem:function(t){var e=new s(t,this.parent),n=this.children.length;return e.index=n,e.path=this.path+"."+n,e},updateArray:function(t){for(var e,n=this.children,i=0,r=t?Math.min(n.length,t.length):0;i<r;++i)n[i].reset(t[i],!0);if(r<n.length){for(r=n.length,e=i;i<r;++i)n[i].destroy();this.children=n.slice(0,e),this.emit("updateArray","less",n.slice(e))}else if(t&&r<t.length){for(r=t.length,e=i;i<r;++i)this.pushItem(t[i],!0);this.emit("updateArray","more",n.slice(e))}else this.emit("updateArray","equal",[])},updateItem:function(t,e,n,i){var r=parseInt(e[0],10),o=this.children[r];if(o){switch(e=e.slice(1),t){case"set":e.length?o.set(e,n,!0):o.reset(n,!0);break;case"delete":o.del(e,!0);break;case"push":o.push(e,n,!0);break;case"deleteItem":o.deleteItem(e,n,!0);break;case"displaceItem":o.displaceItem(e,n,!0);break;case"insertItem":o.insertItem(e,n,!0)}this.emit("updateItem",o)}},pushItem:function(t,e){var n=this.createItem(t);this.children.push(n),e||this.emit("pushItem",n)},deleteItem:function(t){var e=this.children[t];e&&(e.destroy(),this.children.splice(t,1),i(this,t),this.emit("deleteItem",t))},displaceItem:function(t){var e=this.children[t.fromIndex];if(e){var n=t.fromIndex,r=t.toIndex;this.children.splice(n,1),this.children.splice(r,0,e),i(this,Math.min(n,r)),this.emit("displaceItem",e,n,r)}},insertItem:function(t){var e=this.createItem(t.data);this.children.splice(t.index,0,e),i(this,t.index),this.emit("insertItem",e,t.index)}};s.prototype.getEacher=function(t){return this._eachers=this._eacher||{},this._eachers[t]||(this._eachers[t]=new a(this,t)),this._eachers[t]},r.shallowMerge(u,a.prototype),e.exports=a},{"./context":7,"./utils":22,"nomocas-utils/lib/emitter":26}],7:[function(t,e,n){function i(t,e,n,i){return function(){t.unsubscribe(e,n,i)}}function r(t){if(!t.forEach){if(!t.split){var e="yavmish.Context : parsing path failed : ";throw console.error(e,t),new Error(e+t)}return t.split(".")}return t}function o(t,e,n){var i=e.length?l.getProp(t.data,e):t.data;if(i||(i=[],l.setProp(t.data,e,i)),!i.forEach)throw new Error("Object is not array at "+e.join(".")+" : couldn't "+n+" object.");return i}function s(t,e,n,i,o){switch(t.assertNotDestroyed(e,n),n=r(n),n[0]){case"$parent":return t.assertHasParent(n),t.parent[e].apply(t.parent,[n.slice(1)].concat(i))&&t;case"$env":return t.env[e].apply(t.env,[n.slice(1)].concat(i))&&t}if("$this"===n[0]&&(n=n.slice(1)),a.allowParentForwarding){if(t.path&&t.parent&&!o)return t.parent[e].apply(t.parent,[t.path+(n.length?"."+n.join("."):"")].concat(i))&&t;if(o){var s="push"===e?t.get(n).length-1:n[n.length-1];return t.notify(e,n,"delete"===e?void 0:i[0],s)}}return n}function a(t,e,n,i){if(h.call(this),this.__yContext__=!0,this.data=void 0!==t?t:{},this.map={},this.binds=[],e){if(this.parent=e,this.env=i?new a(i):e.env,n){var r=this;this.path=n,this.data=this.data||e.get(n),this.parent.subscribe(n,function(t,e,n,i){switch(n.length||n.push("$this"),e){case"set":r.set(n,t,!0);break;case"push":r.push(n,t,!0);break;case"delete":r.del(n,!0);break;case"displaceItem":r.displaceItem(n,t,!0);break;case"insertItem":r.insertItem(n,t,!0);break;case"deleteItem":r.deleteItem(n,t,!0)}},!0,this.binds)}}else this.env=i?i.__yContext__?i:new u(i):a.env}function u(t,e,n){a.call(this,t,e,n),delete this.env}var l=t("./utils"),c=t("./env"),h=t("nomocas-utils/lib/async-collector"),d=t("./interpolable").interpolable,p=/^\$/;a.allowParentForwarding=!0,a.useDelayedDependent=!0,a.prototype={assertNotDestroyed:function(t,e){if(this.destroyed)throw new Error("yamvish.Context : reusing context that has been destroyed ("+t+" "+e+")")},assertHasParent:function(t){if(!this.parent)throw new Error("yamvish.Context : there is no parent in current context. could not find : "+t)},get:function(t){switch(this.assertNotDestroyed("get",t),t=r(t),t[0]){case"$this":if(1===t.length)return this.data;break;case"$parent":return this.assertHasParent(t),this.parent.get(t.slice(1));case"$env":return this.env.get(t.slice(1))}return l.getProp(this.data,t)},set:function(t,e,n){if("object"==typeof t&&!t.forEach&&!e){for(var i in t)this.set(i,t[i],n);return this}if(t=r(t),1===t.length&&"$this"===t[0])return this.reset(e,n);if(t=s(this,"set",t,[e],n),t.__yContext__)return this;var o=l.setProp(this.data,t,e);return o!==e&&this.notify("set",t,e,t[t.length-1]),this},reset:function(t,e){return this.assertNotDestroyed("reset",""),"undefined"==typeof t&&(t={}),this.data=t,a.allowParentForwarding&&this.path&&this.parent&&!e?this.parent.set(this.path,t)&&this:(this.notify("set","$this",t,""),this)},"delete":function(t,e){if(t=s(this,"delete",t,[],e),t.__yContext__)return this;if(!t.length)return this.reset({},e);var n=t.slice(),i=n.pop(),r=n.length?l.getProp(this.data,n):this.data;if(r)if(r.forEach){var o=parseInt(i,10);o<r.length&&(r.splice(o,1),this.notify("delete",t,void 0,o))}else delete r[i],this.notify("delete",t,void 0,i);return this},push:function(t,e,n){if(t=s(this,"push",t,[e],n),t.__yContext__)return this;var i=o(this,t,"push");return i.push(e),this.notify("push",t,e,i.length-1),this},displaceItem:function(t,e,n){if(t=s(this,"displaceItem",t,[e],n),t.__yContext__)return this;var i=o(this,t,"displaceItem");if(e.fromIndex>=i.length||e.toIndex>=i.length)throw new Error("displaceItem failed : indexes out of bound. ("+t+")("+e.fromIndex+","+e.toIndex+")("+i.length+")");var r=i[e.fromIndex];if(!r)throw new Error("Could not displaceItem : nothing found with : "+t+"."+e.fromIndex);return i.splice(e.fromIndex,1),i.splice(e.toIndex,0,r),this.notify("displaceItem",t,e),this},insertItem:function(t,e,n){if(t=s(this,"insertItem",t,[e],n),t.__yContext__)return this;var i=o(this,t,"insertItem");if(e.index>=i.length)throw new Error("insertItem failed : indexes out of bound. ("+t+")("+e.index+")");return i.splice(e.index,0,e.data),this.notify("insertItem",t,e),this},toggle:function(t,e){return this.set(t,!this.get(t)),this},toggleInArray:function(t,e){for(var n=this.get(t),i=0,r=n.length;i<r;++i)if(n[i]===e)return this.del(t+"."+i),this;return this.push(t,e)},setAsync:function(t,e){var n=this;return this.waiting(e.then(function(e){return n.set(t,e),e},function(t){throw console.error("error while Context.setAsync : ",t),t}))},pushAsync:function(t,e){var n=this;return this.waiting(e.then(function(e){return n.push(t,e),e},function(t){throw console.error("error while Context.pushAsync : ",t),t}))},waitUntil:function(t,e){var n=this.get(t),i=this;if(n)e(n);else{var r=function(n){n&&(e(n),i.unsubscribe(t,r,!0))};this.subscribe(t,r,!0)}return this},subscribe:function(t,e,n,o){if(this.assertNotDestroyed("subscribe",t),t=r(t),"*"===t[t.length-1])throw new Error("no more * subscribe allowed - use upstreams instead : "+t.join("."));var s;switch(t[0]){case"$this":s=this.map;break;case"$env":return this.env.subscribe(t.slice(1),e,n,o);case"$parent":return this.assertHasParent(t),this.parent.subscribe(t.slice(1),e,n,o);default:s=l.getProp(this.map,t)}return n?s?(s._upstreams=s._upstreams||[]).push(e):l.setProp(this.map,t,{_upstreams:[e]}):s?(s._listeners=s._listeners||[]).push(e):l.setProp(this.map,t,{_listeners:[e]}),o&&o.push(i(this,t,e,n)),this},unsubscribe:function(t,e,n){t=r(t);var i;switch(t[0]){case"$this":i=this.map;break;case"$env":return this.env.unsubscribe(t.slice(1),e,n)&&this;case"$parent":return this.assertHasParent(t),this.parent.unsubscribe(t.slice(1),e,n)&&this;default:this.map&&(i=l.getProp(this.map,t))}if(this.destroyed||!i)return this;for(var o=n?i._upstreams:i._listeners,s=0,a=o.length;s<a;++s)if(o[s]===e){o.splice(s,1);break}return this},notify:function(t,e,n,i){if(this.assertNotDestroyed("notify",e),e=r(e),"$parent"===e[0])return this.assertHasParent(e),this.parent.notify(t,e.slice(1),n,i)&&this;"$this"===e[0]&&(e=e.slice(1));var o=this.map,s=0,a=e.slice(1);if(!e.length)return this.notifyDownstream(this.map,t,e,n,i);this.map._upstreams&&this.notifyUpstream(this.map,t,e,n,i);for(var u=e.length-1;s<u&&(o=o[e[s]]);++s)o._upstreams&&this.notifyUpstream(o,t,a,n,i),a=a.slice(1);return o?(o=e.length?o[e[s]]:o,o&&this.notifyDownstream(o,t,e,n,i),this):this},notifyDownstream:function(t,e,n,i,r){if(t=t||this.map,t._upstreams&&this.notifyUpstream(t,e,[],i,r),t._listeners)for(var o=0,s=t._listeners.length;o<s;++o){var a=t._listeners[o];a?a.call(this,i,e,n,r):s=t._listeners.length}if("push"!==e)for(var u in t)"_listeners"!==u&&"_upstreams"!==u&&this.notifyDownstream(t[u],"set",n?n.concat(u):n,void 0!==i&&null!==i?i[u]:void 0,u);return this},notifyUpstream:function(t,e,n,i,r){for(var o=0,s=t._upstreams.length;o<s;++o){var a=t._upstreams[o];a?a.call(this,i,e,n,r):s=t._upstreams.length}},onAgora:function(t,e){var n=(this.env||this).data.agora,i=this,r=function(){e.apply(i,arguments)};return n.on(t,r),(this.binds=this.binds||[]).push(function(){n.off(t,r)}),this},toAgora:function(t){var e=[t,this].concat([].slice.call(arguments,1));return(this.env||this).data.agora.emit.apply((this.env||this).data.agora,e),this},output:function(t){var e={},n=t?l.getProp(this.data,t):this.data;if(!n)return null;for(var i in n)p.test(i)||(e[i]=n[i]);return e},clone:function(t){return new a(l.copy(this.data),this.parent,this.path,t&&this.env?this.env.clone():this.env)},destroy:function(){this.binds&&this.binds.forEach(function(t){t()}),this.destroyed=!0,this.binds=null,this.parent=null,this.data=null,this.methods=null,this.map=null},toMethods:function(t,e){if(this.methods=this.methods||{},"object"!=typeof t||e)l.setProp(this.methods,t,e);else for(var n in t)l.setProp(this.methods,n,t[n]);return this},call:function(t){switch(t=r(t),t[0]){case"$parent":return this.assertHasParent(t),this.parent.call(t.slice(1));case"$env":return this.env.call(t.slice(1))}var e=l.getProp(this.methods,t),n=[].slice.call(arguments,1);if(!e)throw new Error("Context.call : no method found with : "+t);return e.apply(this,n)},dependent:function(t,e,n){var i=this;if("string"==typeof e){var r=d(e);if(!r.__interpolable__)throw new Error("dependent var failed : bad expression type : "+e);return r.subscribeTo(this,function(e){this.set(t,e)}),this.set(t,r.output(this))}this.binds=this.binds||[];var o,s=[],u=e.length;return count=0,e.forEach(function(e){s.push(this.get(e));var r=count++;this.subscribe(e,function(e,l,c,h){s[r]!==e&&(s[r]=e,u>1&&a.useDelayedDependent?o||(o=i.delay(function(){o&&(o=null,i.set(t,n.apply(i,s)))},0)):i.set(t,n.apply(i,s)))},!1,this.binds)},this),this.set(t,n.apply(this,s)),this}},a.prototype.del=a.prototype["delete"],l.shallowMerge(h.prototype,a.prototype),u.prototype=new a,u.prototype.clone=function(){return new u(this.data.clone())},a.env=new u(c),e.exports={Context:a,Env:u}},{"./env":8,"./interpolable":10,"./utils":22,"nomocas-utils/lib/async-collector":25}],8:[function(t,e,n){(function(n){var i="undefined"==typeof window&&"undefined"==typeof document,r=t("nomocas-utils/lib/emitter"),o={isServer:i,debug:!0,expressionsGlobal:i?n:window,factory:i?null:document,agora:new r,clone:function(t){var e={};for(var n in this)"agora"!==n||t?e[n]=this[n]:e.agora=new r;return e}};e.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"nomocas-utils/lib/emitter":26}],9:[function(t,e,n){function i(t){this._queue=t?t._queue.slice():[]}var r=/^(?:[\w'"\(\),]+\s*){0,10}/;i.prototype={call:function(t,e){for(var n=0,i=this._queue.length;n<i;++n)e=this._queue[n].call(t,e);return e},lower:function(){return this._queue.push(function(t){return t.toLowerCase()}),this},upper:function(){return this._queue.push(function(t){return t.toUpperCase()}),this},json:function(t){return this._queue.push(function(e){return JSON.stringify.apply(JSON,t?[e,null," "]:[e])}),this},truncate:function(){return this._queue.push(function(t){var e=r.exec(t);return e?e[0]+"...":t}),this},randomizeArray:function(){return this._queue.push(function(t){return t?t.forEach?t.sort(function(){return.5-Math.random()}):t:null}),this},urlencode:function(){return this._queue.push(function(t){return encodeURI(t)}),this}},e.exports=i},{}],10:[function(t,e,n){function i(t,e){try{return t.call(e.data,e,e.env?e.env.data.expressionsGlobal:e.data.expressionsGlobal)}catch(n){return console.error("interpolable error : ",t.expression||"",n),console.error(n.stack),""}}function r(t,e,n){var i=t+e;if(d[i])return n.push.apply(n,d[i].dependencies),d[i].func;var r=[],o=t.replace(l,function(t){if("true"==t||"false"==t||"null"==t)return t;switch(t[0]){case'"':case"'":return t;case"$":if("."===t[1])return"__global"+t.substring(1);default:return"("===t[t.length-1]?(r.push(t.substring(0,t.length-1)),"__context.data."+t):(r.push(t),'__context.get(["'+t.split(".").join('","')+'"])')}});n.push.apply(n,r);var s=new Function("__context","__global","return "+o+";");if(!e)return d[i]={func:s,dependencies:r},f.debug&&(s.expression=t),s;var a=new Function("Filter","return new Filter()."+e)(u),c=function(t,e){return a.call(t,s.call(this,t,e))};return f.debug&&(c.expression=t),d[i]={func:c,dependencies:r},c}function o(t,e,n,r,o){return function(){var s=t.results[r];t.results[r]=i(n,e),s!==t.results[r]&&(1!==t.dependenciesCount&&f.allowDelayedUpdate?t.willFire||(t.willFire=e.delay(function(){t.willFire&&(t.willFire=null,o(t.output(e),"set"))},0)):o(t.output(e),"set"))}}function s(t){var e=i(this.parts[1].func,t);return"undefined"!=typeof e||this._strict?e:""}function a(t){return function(){t.destroy()}}var u=t("./filter"),l=/true|false|null|\$\.(?:[a-zA-Z]\w*(?:\.[\w\$]*)*)|\$(?:[a-zA-Z]\w*(?:\.[\w\$]*)*)\(?|"[^"]*"|'[^']*'|[a-zA-Z_]\w*(?:\.[\w\$]*)*\(?/g,c=/(\{{1,2})\s*(.+?)((?:(?:\s\|\s)(.+?))?)\s*(\}{1,2})/,h={},d={},p=function(t){this.outputed=!1,this.results=[],this.willFire=null,this.parts=t.parts,this.dependenciesCount=t.dependenciesCount,this.directOutput=t.directOutput,this._strict=t._strict,this.binds=[]};p.prototype={output:function(t){if(this.directOutput)return this.outputed?this.results[0]:(this.outputed=!0,this.results[0]=this.directOutput(t));for(var e="",n=!0,r=0,o=0,s=this.parts.length;o<s;o++)n?e+=this.parts[o]:(e+=this.outputed?this.results[r]:this.results[r]=i(this.parts[o].func,t),r++),n=!n;return this.outputed=!0,e},destroy:function(){for(var t=0,e=this.binds.length;t<e;++t)this.binds[t]()}};var f=function(t,e,n){this.__interpolable__=!0,this._strict=n||!1;var i;7===e.length&&""===e[0]&&""===e[6]&&(this.directOutput=s),this.parts=[],this.original=t,this.dependenciesCount=0;for(var o=e[0],a=0;void 0!==o&&(this.parts.push(o),a+1!==e.length);){var u=e[a+1];if(u.length!==e[a+5].length)throw new Error("interpolation need same number of brackets on both sides : "+t);var i=[];this.parts.push({binded:2===u.length,func:r(e[a+2],e[a+4],i),dep:i}),this.dependenciesCount+=i.length,a+=6,o=e[a]}};f.prototype={subscribeTo:function(t,e,n){for(var i=new p(this),r=0,s=!1,u=1,l=this.parts.length;u<l;u+=2){var c=this.parts[u];if(c.binded){s=!0;for(var h=o(i,t,c.func,r,e),d=c.dep,f=0,m=d.length;f<m;f++)t.subscribe(d[f],h,!1,i.binds)}r++}return s&&n&&n.push(a(i)),i},output:function(t){if(this.directOutput)return this.directOutput(t);for(var e="",n=!0,r=this.parts,o=0,s=r.length;o<s;++o){if(n)e+=r[o];else{var a=i(r[o].func,t);if("undefined"==typeof a){if(this._strict)return;e+=""}e+=a}n=!n}return e},assertSingleDependency:function(){if(this.dependenciesCount>1)throw new Error("This Interpolable could only depend to one variable : "+this.original);return this},firstDependency:function(){return this.parts[1].dep[0]}},f.allowDelayedUpdate=!1,e.exports={interpolable:function(t,e){if("string"!=typeof t)return t;if(h[t])return h[t];var n=t.split(c);return 1==n.length?t:h[t]=new f(t,n,e)},Interpolable:f}},{"./filter":9}],11:[function(t,e,n){var i=t("../../utils"),r=t("nomocas-utils/lib/emitter"),o=function(t){this.__yContainer__=!0,this.parent=t,this.childNodes=[]};o.prototype=new r;var s={assertNotDestroyed:function(){if(this.destroyed)throw new Error("yamvish.Container : reusing container that has been destroyed")},appendChildrenToFragment:function(t,e,n,i){this.assertNotDestroyed(),this.parentNode=e,n&&n.push(this);for(var r=0,o=this.childNodes.length;r<o;++r){var s=this.childNodes[r];s.__yContainer__?s.appendChildrenToFragment(t,e,n):t.appendChild(s)}return!i&&this.witness&&t.appendChild(this.witness),this},empty:function(t){return this.childNodes.forEach(function(e){(t||e!==this.witness)&&i.destroyElement(e,!0)},this),i.destroyChildren(this.childNodes,!0),this.childNodes=[],this},mount:function(t){return this.assertNotDestroyed(),"string"==typeof t&&(t=document.querySelector(t)),this.mounted&&t===this.parentNode?(this.closing&&this.transitionIn&&this.transitionIn(),this):(i.emptyNode(t),this.appendTo(t))},appendTo:function(t){this.assertNotDestroyed();var e=t;if("string"==typeof t&&(t=document.querySelector(t)),this.mounted&&t===this.parentNode)return this.closing&&this.transitionIn&&this.transitionIn(),this;if(!t)throw new Error("could not mount container : no parent found with "+e);if(this.mounted=!0,t.__yContainer__)t.appendChild(this);else{this.parentNode=t;for(var n=0,i=this.childNodes.length;n<i;++n){var r=this.childNodes[n];r.__yContainer__?r.appendTo(t):t.appendChild(r)}this.witness&&t.appendChild(this.witness)}return this.emit("mounted",this),this},mountBefore:function(t,e){if(this.assertNotDestroyed(),this.mounted&&t===this.parentNode&&this.nextSibling===e)return this.closing&&this.transitionIn&&this.transitionIn(),this;if(t.__yContainer__&&(i.array.insertBefore(t.childNodes,e,this),t=t.parentNode),!t)return this;var n=document.createDocumentFragment(),r=[];this.mounted=!0,this.parentNode=t,this.appendChildrenToFragment(n,t,r,e===this.witness),t.insertBefore(n,e.__yContainer__?e.firstChild:e);for(var o=0,s=r.length;o<s;++o)r[o].emit("mounted",this);return this},addWitness:function(t,e){return this.assertNotDestroyed(),this.witness?this:(this.witness=document.createComment(t),e?(e.appendChild(this.witness),this):this.parentNode?(this.childNodes.length?this.parentNode.insertBefore(this.witness,this.firstChild):(console.warn("addWitness : container has been mounted without witness and children. Appending witness in parent.",this),this.parentNode.appendChild(this.witness)),this):this)},removeWitness:function(){return this.witness?(this.witness.parentNode&&this.witness.parentNode.removeChild(this.witness),this.witness=null,this):this},remount:function(){if(this.assertNotDestroyed(),this.mounted)return this.closing&&this.transitionIn&&this.transitionIn(),this;if(!this.witness||!this.witness.parentNode)throw new Error("container could not be remounted : no witness or witness has been unmounted.");return this.mountBefore(this.witness.parentNode,this.witness),this},doUnmount:function(t){if(this.assertNotDestroyed(),this.mounted=!1,!this.parentNode)return this;this.witness&&!t&&this.parentNode.removeChild(this.witness);for(var e=0,n=this.childNodes.length;e<n;++e){var i=this.childNodes[e];i.__yContainer__?i.doUnmount():i.parentNode&&i.parentNode.removeChild(i)}return this.parentNode=null,this.emit("unmounted",this),this},unmount:function(t,e){if(this.assertNotDestroyed(),!this.parentNode)return e&&e(this),this;if(!this._beforeUnmount)return this.doUnmount(t),e&&e(this),this;var n=this;return this._beforeUnmount(function(){n.doUnmount(t),e&&e(n)}),this},appendChild:function(t){if(this.assertNotDestroyed(),this.parentNode){var e=this.nextSibling;e?t.__yContainer__?t.mountBefore(this.parentNode,e):this.parentNode.insertBefore(t,e):t.__yContainer__?t.appendTo(this.parentNode):this.parentNode.appendChild(t)}return this.childNodes.push(t),this},removeChild:function(t){if(this.assertNotDestroyed(),"number"==typeof t){var e=t;if(t=this.childNodes[e],!t)throw new Error("container.removeChild by index : child not found : ",e);this.childNodes.splice(e,1)}else i.array.remove(this.childNodes,t);return this.parentNode&&(t.__yContainer__?t.unmount():this.parentNode.removeChild(t)),this},destroyer:function(){var t=this;return function(){t.destroy()}},destroy:function(){i.destroyElement(this,!0),this.mounted=!1,this.destroyed=!0,this.comment=null,this.parentNode=null,this.parent=null,this.childNodes=null,this.emit("destroyed",this)},hide:function(){return this.assertNotDestroyed(),this.childNodes.forEach(function(t){return t.__yContainer__?t.hide():void(t.style&&(t.style.display="none"))}),this},show:function(){return this.assertNotDestroyed(),this.childNodes.forEach(function(t){return t.__yContainer__?t.show():void(t.style&&(t.style.display=""))}),this},beforeUnmount:function(t){this._beforeUnmount=t}};Object.defineProperty(o.prototype,"nextSibling",{get:function(){if(this.assertNotDestroyed(),this.witness)return this.witness;if(!this.childNodes.length)return null;var t=this.childNodes[this.childNodes.length-1];return t?t.nextSibling:null;
}}),Object.defineProperty(o.prototype,"firstChild",{get:function(){this.assertNotDestroyed();var t=this.childNodes[0];return t?t.__yContainer__?t.firstChild:t:null}}),Object.defineProperty(o.prototype,"lastChild",{get:function(){this.assertNotDestroyed();var t=this.childNodes[this.childNodes.length-1];return t?t.__yContainer__?t.lastChild:t:null}}),i.shallowMerge(s,o.prototype),e.exports=o},{"../../utils":22,"nomocas-utils/lib/emitter":26}],12:[function(t,e,n){var i=t("../../utils"),r=t("./container"),o=t("nomocas-utils/lib/emitter"),s=t("../../context-eacher"),a=t("./switcher"),u=function(t,e,n,i){var r=n[0],o=n[1],a=n[2],u=n[3],c="string"==typeof r,h=c?t.getEacher(r):new s(t,r),d=new l(h,e,o,a,i);u&&u(d,h,t,e,i)},l=function(t,e,n,i,o){this.itemTemplate=n,this.itemsContainer=new r,this.contextEacher=t;var s=[],u=this;i&&s.push({value:"empty",template:i});var l={value:"items",container:this.itemsContainer};s.push(l),a.call(this,t.context,e,o,s),this.itemWitness=l.witness,this.listeners={pushItem:function(t){u.pushItem(t)},updateArray:function(t,e){u.updateArray(t,e)},displaceItem:function(t,e,n){u.displaceItem(t,e,n)},insertItem:function(t,e){u.insertItem(t,e)},deleteItem:function(t){u.deleteItem(t)}},t.on("pushItem",this.listeners.pushItem),t.on("deleteItem",this.listeners.deleteItem),t.on("updateArray",this.listeners.updateArray),t.on("displaceItem",this.listeners.displaceItem),t.on("insertItem",this.listeners.insertItem),this.updateArray(t.children.length?"more":"equal",t.children)};l.prototype=new o;var c={getItem:function(t){return this.itemsContainer.childNodes[t]},destroy:function(){this.contextEacher.off("pushItem",this.listeners.pushItem),this.contextEacher.off("deleteItem",this.listeners.deleteItem),this.contextEacher.off("updateArray",this.listeners.updateArray),this.contextEacher.off("displaceItem",this.listeners.displaceItem),this.contextEacher=null,this.itemTemplate=null,this.itemsContainer=null,a.prototype.destroy.call(this)},pushItem:function(t,e){e||this["switch"]("items");var n=this.itemTemplate.toContainer(t,this.parentContainer);n.context=t,n.mountBefore(this.node,this.itemWitness),this.itemsContainer.childNodes.push(n),e||this.emit("pushItem",n)},updateArray:function(t,e){switch(t){case"equal":break;case"more":var n=this;this["switch"]("items"),e.forEach(function(t){n.pushItem(t,!0)});break;case"less":for(var i=this.itemsContainer.childNodes,r=e[0].index,o=r,s=i.length;o<s;++o)i[o].destroy();this.itemsContainer.childNodes=i.slice(0,r)}this.itemsContainer.childNodes.length||this["switch"]("empty"),this.emit("updateArray",this)},displaceItem:function(t,e,n){var r=this.itemsContainer.childNodes,o=r[e];if(o){var s=r[n],a=s?e<n?s.nextSibling:s.firstChild:this.itemWitness;i.appendContainerTo(o,this.node,a),r.splice(e,1),r.splice(n,0,o),this.emit("displaceItem",o,e,n)}},insertItem:function(t,e){this["switch"]("items");var n=this.itemTemplate.toContainer(t,this.parentContainer),i=this.itemsContainer.childNodes[e];n.context=t,n.mountBefore(this.node,i?i.firstChild:this.itemWitness),this.itemsContainer.childNodes.splice(e,0,n),this.emit("insertItem",n,e)},deleteItem:function(t){var e=this.itemsContainer.childNodes,n=e[t];if(!n)return void console.warn("eacher.deleteItem : no node found with %s. aborting.",t);var i=this;n.unmount(!1,function(){e.splice(t,1),n.destroy(),e.length||i["switch"]("empty"),i.emit("deleteItem",n,t)})}};i.shallowMerge(c,l.prototype),i.shallowMerge(a.prototype,l.prototype),e.exports=u},{"../../context-eacher":6,"../../utils":22,"./container":11,"./switcher":14,"nomocas-utils/lib/emitter":26}],13:[function(t,e,n){function i(t,e,n,i){var r=t.split("."),o={actor:n,name:t};if(2==r.length){switch(r[0]){case"context":o.actor=e;break;case"container":o.actor=i;break;default:throw new Error("unrecognized template.on event path : "+t)}o.name=r[1]}return o}function r(t,e,n,i){for(var r,o=e[0],s=0;o;){switch(r=null,o.type){case"*":r=h[o.handler];break;case"dom":case"context":r=o.handler;break;case"custom":r=o.handler.dom}if(r){if(r.__yTemplate__?r.toDOM(t,t.context||n,i):r(t.context||n,t,o.args,i),o.suspendAfter)break;o=e[++s]}else o=e[++s]}}var o=t("../../utils"),s=t("../../context").Context,a=t("../../template"),u=t("./utils");o.shallowMerge(u,o);var l=t("./switcher"),c=t("./container"),h={each:t("./each"),eachTemplates:function(t,e,n,i){var r=n[0],o=n[1];r.forEach(function(n){(o?o(n):n).toDOM(e,t,i)})},"if":function(t,e,n,i){var r=n[0],o=r,s=n[1],a=n[2];r&&r.__interpolable__?o=r.output(t):"function"==typeof r&&(o=r.call(this,t)),o?s.toDOM(e,t,i):a&&a.toDOM(e,t,i)},container:function(t,e,n,i){var r=n[0],o=n[1],s=o.toContainer(t,i).appendTo(e);r.lateMount?s.addWitness(r.lateMount,e):s.appendTo(e)},lateMount:function(t,e,n,i){var r=n[0],o=n[1],s=document.createComment("late mount");e.appendChild(s),r(t,o,s,i)},agoraView:function(t,e,n,i){var r=n[0],o=n[1];h.lateMount(t,e,[function(t,e,n,i){var o;t.onAgora(r+":toggle",function(t,e){o&&o.mounted&&!o.closing?this.toAgora(r+":hide",e):this.toAgora(r+":show",e)}),t.onAgora(r+":show",function(t,r){o||(o=(new a).view(e).toContainer(this,i),o.witness=n),r&&o.context.reset(r),o.remount(),o.emit("shown",o)}),t.onAgora(r+":hide",function(t,e){o&&(e&&o.context.reset(e),o.mounted&&o.unmount(!0))})},o,i])},mountIf:function(t,e,n,i){var r=n[0],o=[{value:!0,template:n[1]}];n[2]&&o.push({value:!1,template:n[2]}),new l(t,e,i,o).expression(r)},"switch":function(t,e,n,i){var r=n[0],o=n[1],s=n[2],a=n[3],u=[];for(var c in o)u.push({value:c,template:o[c]});new l(t,e,i,u,s,a).expression(r)},newContext:function(t,e,n){var i=n[0],r=n[1]||t,o=n[2];e.context=new s(i,r,o)},"with":function(t,e,n,i){var r=n[0],o=n[1],a="string"==typeof r,u=new s(a?t.get(r):r,t,a?r:null),l=e.context;e.context=u,o.toDOM(e,u,i),e.context=l},tag:function(t,e,n,i){var r=n[0],o=n[1],s=document.createElement(r);o.toDOM(s,t,i),e.appendChild(s)},text:function(t,e,n){var i,r=n[0];if(r.__interpolable__){var o=r.output(t);i=document.createTextNode(o),i.binds=i.binds||[],r.subscribeTo(t,function(t,e,n){i.nodeValue=t},i.binds)}else i=document.createTextNode(r);e.appendChild(i)},br:function(t,e){e.appendChild(document.createElement("br"))},attr:function(t,e,n){var i=n[0],r=n[1],o=n[1];if(r&&r.__interpolable__){o=r.output(t);var s=function(t,n,r){e.setAttribute(i,t)};e.binds=e.binds||[],r.subscribeTo(t,s,e.binds)}e.setAttribute(i,o)},prop:function(t,e,n){var i=n[0],r=n[1],o=n[1],s=function(t){t?e[i]=!0:e[i]=!1};r&&r.__interpolable__&&(o=r.output(t),e.binds=e.binds||[],r.subscribeTo(t,s,e.binds)),s(o)},data:function(t,e,n){var i=n[0],r=n[1],o=n[1],s=function(t){"undefined"==typeof t&&(t=""),e.dataset[i]=t};r&&r.__interpolable__&&(o=r.output(t),e.binds=e.binds||[],r.subscribeTo(t,s,e.binds)),s(o)},val:function(t,e,n){var i=n[0],r=n[1],o=r;r.__interpolable__?(e.addEventListener("input",function(e){var n=e.target.value;o!==n&&(o=n,t.set(i,e.target.value))}),e.binds=e.binds||[],o=r.output(t),r.subscribeTo(t,function(t,n,i){t!==o&&(e.value=t,o=t)},e.binds),e.setAttribute("value",o)):e.setAttribute("value",r)},contentEditable:function(t,e,n){var i,r,s=n[0],a=n[1],u=n[2],l=n[3],c=n[4],h=n[5];if("html"!==l&&e.addEventListener("keypress",function(t){13===t.which&&t.preventDefault()}),a.__interpolable__){r=a.output(t),e.binds=e.binds||[];var d=function(n){var a=o.castNodeValueTo(e,l);r!==a&&(r=a,r?e.classList.remove("empty"):e.classList.add("empty"),i=!0,t.set(s,r),i=!1,h&&h.call(t,{context:t,path:s,node:e,value:r}))},p=!0;u&&u.__interpolable__?(p=!!u.output(t),u.subscribeTo(t,function(t,n,i,r){t!=p&&(p=t,t?e.addEventListener(c,d):e.removeEventListener(c,d),e.contentEditable=!!t)},e.binds)):e.contentEditable=!!u,p&&(e.addEventListener(c,d),e.contentEditable=!0),a.subscribeTo(t,function(t,n,o,s){i||t===r||(r=t,e.textContent=t,e.classList[t?"remove":"add"]("empty"))},e.binds)}else r=a;e.textContent=r,e.classList[r?"remove":"add"]("empty")},setClass:function(t,e,n){var i,r=n[0],s=n[1],a=r,u=function(t,n,r){i=t;try{t?e.classList.add(a):e.classList.remove(a)}catch(o){console.error("error while setting node class with : ",e,a)}};if(r.__interpolable__){var l=function(t,n,r){i&&(o.removeClass(e,a),o.setClass(e,t)),a=t};e.binds=e.binds||[],r.subscribeTo(t,l,e.binds),a=r.output(t)}s.__interpolable__?(e.binds=e.binds||[],s.subscribeTo(t,u,e.binds),u(s.output(t),"set")):u(s,"set")},css:function(t,e,n){var i=n[0],r=n[1],o=r;r.__interpolable__&&(o=r.output(t),e.binds=e.binds||[],r.subscribeTo(t,function(t,n,r){e.style[i]=t},e.binds)),e.style||(e.style={}),e.style[i]=o},visible:function(t,e,n){var i=n[0],r=i,o=(e.style?e.style.display:"")||"";e.style||(e.style={}),i.__interpolable__&&(r=i.output(t),e.binds=e.binds||[],i.subscribeTo(t,function(t,n,i){e.__yContainer__?t?e.show():e.hide():e.style.display=t?o:"none"},e.binds)),e.__yContainer__?r?e.show():e.hide():e.style.display=r?o:"none"},on:function(t,e,n,r){var o=i(n[0],t,e,r);if(o.actor.on)o.actor.on(o.name,n[1],[t]);else if(o.actor.addEventListener){var s=function(e){n[1].call(t,e)};o.actor.addEventListener(o.name,s)}},once:function(t,e,n,r){var o=i(n[0],t,e,r);if(o.actor.once)o.actor.once(o.name,n[1],[t]);else if(o.actor.addEventListener){var s=function(e){o.actor.removeEventListener(o.name,s),n[1].call(t,e)};o.actor.addEventListener(o.name,s)}},off:function(t,e,n){var r=i(n[0],t,e,container);r.actor.off?r.actor.off(r.name,n[1]):r.actor.removeEventListener&&r.actor.removeEventListener(r.name,n[1])},client:function(t,e,n,i){t.env.data.isServer||n[0].toDOM(e,t,i)},server:function(t,e,n,i){t.env.data.isServer&&n[0].toDOM(e,t,i)},log:function(t,e,n,i){console.log(n[0]||"yamvish template log"),console.log("-> context",t),console.log("-> node",e),console.log("-> container",i)},suspendUntil:function(t,e,n,i){var r,o=n[0],s=n[1],u=n[2],l=o.__interpolable__?o.output(t):o,c=new a(u._queue.slice(s));l?c.toDOM(e,t,i):o.__interpolable__&&(r=o.subscribeTo(t,function(n,o,s){n&&(r.destroy(),c.toDOM(e,t,i))}))},useFromContext:function(t,e,n,i){var r,o=n[0],s=n[1],a=function(e){if(e!==r&&(r=e,i.empty(),e)){var n=y();n.use.apply(n,[e].concat(s)).toDOM(i,t)}};e.binds=e.binds||[],i.addWitness("use from context : "+o),t.subscribe(o,a,!1,e.binds),a(t.get(o))}};a.prototype.toDOM=function(t,e,n){e=e||new s,r(t,this._queue,e,n)},a.prototype.toContainer=function(t,e){t=t||new s;var n=new c(e);return 1===this._queue.length&&this._queue[0].asContainer?this._queue[0].args[1].toContainer(t,n):(r(n,this._queue,t,n),n)},e.exports=h},{"../../context":7,"../../template":21,"../../utils":22,"./container":11,"./each":12,"./switcher":14,"./utils":15}],14:[function(t,e,n){var i=(t("../../utils"),t("../../interpolable").interpolable),r=function(t,e,n,i,r,o){this.node=e,this.context=t,this.items=i,this.sequencedSwitch=o,this.parentContainer=n,this.destructOnSwitch=r;var s=this;e.binds=e.binds||[],e.binds.push(function(){s.destroy()}),i.forEach(function(t){var n=document.createComment("switcher : "+t.value);e.appendChild(n),t.witness=n,"default"===t.value&&(s.defaultItem=t)})};r.prototype={destroy:function(){this.interpolableInstance&&this.interpolableInstance.destroy(),this.interpolableInstance=null;var t;for(var e in this.items)t=this.items[e],t.container&&t.container.destroy(),t.witness.parentNode&&t.witness.parentNode.removeChild(t.witness);this.node=null,this.context=null,this.witness=null,this.items=null,this.parentContainer=null,this.defaultItem=null},expression:function(t){if(t=i(t),t.__interpolable__){var e=this;this.interpolableInstance=t.subscribeTo(this.context,function(t){e["switch"](t)}),this["switch"](t.output(this.context))}else"function"==typeof t?this["switch"](t(this.context)):this["switch"](t)},"switch":function(t){var e=this,n=this.items.some(function(n){if(n.value===t)return n.container||(n.container=n.template.toContainer(e.context,e.parentContainer)),e._mount(n),!0});n||(this.defaultItem?(this.defaultItem.container||(this.defaultItem.container=this.defaultItem.template.toContainer(e.context,e.parentContainer)),e._mount(this.defaultItem)):e._unmountCurrent())},_unmountCurrent:function(t){var e=this.currentItem,n=this;return e?(e.container.unmount(!1,function(){n.node.__yContainer__&&n.node.removeChild(e.container),e&&n.destructOnSwitch&&(e.container.context=null,e.container.destroy(),e.container=null),t&&t.call(n)}),void(this.currentItem=null)):void(t&&t.call(n))},_mount:function(t){if(this.currentItem!==t){oldItem=this.currentItem;var e=function(){this.currentItem=t,t.container.mountBefore(this.node,t.witness)};if(this.sequencedSwitch)return this._unmountCurrent(e);this._unmountCurrent(),e.call(this)}}},e.exports=r},{"../../interpolable":10,"../../utils":22}],15:[function(t,e,n){var i=e.exports={insertHTML:function(t,e,n){if(t){var i,r=[],o=document.createElement("div");"<"!==t[0]&&(t="<p>"+t+"</p>",i=!0),o.innerHTML=t;var s,a=i?o.firstChild:o,u=[].slice.call(a.childNodes);n&&(s=new DocumentFragment);for(var l=0,c=u.length;l<c;++l){var h=u[l];r.push(h),n?s.appendChild(h):e.appendChild(h)}return n&&e.insertBefore(s,n),r}},destroyChildren:function(t,e){if(t.childNodes){var n=t.childNodes;e&&(n=[].slice.call(n));for(var r=0;r<n.length;r++)i.destroyElement(n[r],e)}},destroyElement:function(t,e){if(t.__yContainer__?t.childNodes&&i.destroyChildren(t,e):(e&&t.parentNode&&t.parentNode.removeChild(t),1===t.nodeType&&i.destroyChildren(t)),t.binds){for(var n=0,r=t.binds.length;n<r;n++)t.binds[n]();t.binds=null}t.context&&(t.context.destroy(),t.context=null)},emptyNode:function(t){if(t.childNodes&&t.childNodes.length)if(t.__yContainer__)t.childNodes.forEach(function(t){i.destroyElement(t,!0)}),t.childNodes=[];else for(;t.firstChild;)t.removeChild(t.firstChild)},hide:function(t){return t.__yContainer__?t.hide():(t.style&&(t.style.display="none"),t)},show:function(t){return t.__yContainer__?t.show():(t.style&&(t.style.display=""),t)},insertBefore:function(t,e,n){if(e.__yContainer__){if(e.childNodes)for(var r=0,o=e.childNodes.length;r<o;++r)i.insertBefore(t,e.childNodes[r],n)}else t.insertBefore(e,n)},appendContainerTo:function(t,e,n){var i=document.createDocumentFragment();t.appendChildrenToFragment(i,e),n?e.insertBefore(i,n):e.appendChild(i)},castNodeValueTo:function(t,e){switch(e){case"text":return t.textContent;case"integer":return parseInt(t.textContent,10);case"html":return t.innerHTML;default:throw new Error("content editable casting fail : unrecognised rule : ",e)}}}},{}],16:[function(t,e,n){function i(t,e,n,i){var r,o=e.indexOf("</"+t+">");if(o===-1)throw new Error(t+" tag badly closed.");return o&&(r=e.substring(0,o),"templ"===t?i.templFunc=new Function(r):i.raw(r)),e.substring(o+t.length+3)}var r=t("elenpi"),o=r.r,s=r.Parser,a=t("../template"),u=t("./string-to-template"),l=(t("../api"),/^([\w-_]+)\s*(?:=\s*("([^"]*)"|[\w-_]+|\{\{[^\}]+\}\}|\{[^\}]+\}))?\s*/),c=/if|each|with|mountIf/,h=/client|server|view|container/,d=/[\w\.\$_-]+\:[\w\.\$_-]+/,p=new RegExp("^<("+c.source+"|"+h.source+"|"+d.source+")\\s*"),f=t("./open-tags"),m=/^(?:script|style|code|templ)/,v={document:o().zeroOrMore(null,o().space().rule("comment")).regExp(/^\s*<!DOCTYPE[^>]*>\s*/i,!0).rule("children").space(),comment:o().regExp(/^<!--(?:.|\s)*?(?=-->)-->/,!1,function(){}),tagEnd:o().regExp(/^\s*<\/([\w:-_]+)\s*>/,!1,function(t,e){if(t.tagName!==e[1])throw new Error("tag badly closed : "+e[1]+" - (at opening : "+t.tagName+")")}),children:o().zeroOrMore(null,o().oneOf([o().space().rule("comment"),o().space().rule("yamTag"),o().space().rule("tag"),o().rule("text")])),text:o().regExp(/^[^<]+/,!1,function(t,e){t.text(e[0])}),tag:o().regExp(/^<([\w-_]+)\s*/,!1,function(t,e){t.tagName=e[1]}).done(function(t,e){return e._innerTemplate=new a,this.exec(t,e._innerTemplate,this.rules.attributes)}).oneOf([o()["char"](">").done(function(t,e){if(f.test(e.tagName))return t;if(m.test(e.tagName))return i(e.tagName,t,e,e._innerTemplate);var n=this.exec(t,e._innerTemplate,this.rules.children);return n!==!1&&this.exec(n,e,this.rules.tagEnd)}),o().regExp(/^\/>/)]).done(function(t,e){return"yield"===e.tagName&&(e.tagName="__yield"),"templ"!==e.tagName?e.tag(e.tagName,e._innerTemplate):e.use(e._innerTemplate.templFunc),e._innerTemplate=null,e.tagName=null,t}),yamTagPath:o().regExp(/^([\w-_$]+|\{{1,2}[^\}]*\}{1,2})/,!1,function(t,e){t.path=e[1]}),yamTag:o().regExp(p,!1,function(t,e){t.tagName=e[1]}).done(function(t,e){var n={};return e.attrMap=n,e.tagName.match(c)?this.exec(t,n,this.rules.yamTagPath):e.tagName.match(h)?t:this.exec(t,n,this.rules.attributesMap)}).space().oneOf([o()["char"](">").done(function(t,e){var n=e._innerTemplate=new a,i=this.exec(t,n,this.rules.children);return i!==!1&&this.exec(i,e,this.rules.tagEnd)}),o().regExp(/^\/>/)]).done(function(t,e){var n=e.tagName,i=e.attrMap,r=e._innerTemplate;switch(n){case"if":case"each":case"with":case"mountIf":e[n](i.path,r);break;case"client":case"server":case"view":case"container":e[n](r);break;default:e.use(n,i,r)}return e._innerTemplate=null,e.attrMap=null,e.tagName=null,t}),attributesMap:o().zeroOrMore(null,o().regExp(l,!1,function(t,e){t[e[1]]=void 0!==e[3]?e[3]:void 0!==e[2]?e[2]:""}).space()),attributes:o().zeroOrMore(null,o().regExp(l,!1,function(t,e){var n=e[1],i=void 0!==e[3]?e[3]:void 0!==e[2]?e[2]:"";switch(n){case"class":if(!i)break;i.split(/\s+/).forEach(function(e){e&&t.cl(e)});break;case"data-template":if(!i)break;var r=u.parseTemplate(i);if(r===!1)throw new Error("data-template attribute parsing failed : "+i);t._queue=t._queue.concat(r._queue);break;default:t.attr(n,i)}}))},g=new s(v,"children");g.createDescriptor=function(){return new a},e.exports=g},{"../api":5,"../template":21,"./open-tags":18,"./string-to-template":20,elenpi:23}],17:[function(t,e,n){var i=t("elenpi"),r=i.r,o=i.Parser,s=t("../utils"),a=t("./primitive-argument-rules"),u={path:r().oneOrMore(null,r().regExp(/^[\w-_\$]+/,!1,function(t,e){(t.path=t.path||[]).push(e[0])}),r().regExp(/^\./)),call:r().rule("path").done(function(t,e){return e.method=e.path,e.path=null,e.arguments=[],t}).zeroOrOne(null,r().regExp(/^\s*\(\s*/).zeroOrMore(null,r().oneOf(["integer","float","bool","singlestring","doublestring",r().rule("path").done(function(t,e){return e.arguments.push(e.path),e.path=null,t})]),r().regExp(/^\s*,\s*/)).regExp(/^\s*\)/))};for(var l in a)u[l]=a[l];var c=new o(u,"call");c.parseListener=function(t){var e=this.parse(t);if(!e.method)throw new Error("yamvish listener call badly formatted : "+t);return function(n){var i=this,r=e.method;if("$parent"===r[0]){for(var o=0;i&&"$parent"===r[o];)o++,i=i.parent;if(!i)throw new Error("yamvish listener call could not find parent : "+t);r=r.slice(o)}var a=s.getProp(i.methods,r);if(!a)throw new Error("yamvish listener not found : "+t);if(!e.arguments)return a.call(i,n);for(var u=[n],l=0,c=e.arguments.length;l<c;++l){var h=e.arguments[l];u.push(h.forEach?this.get(h):h)}return a.apply(i,u)}},e.exports=c},{"../utils":22,"./primitive-argument-rules":19,elenpi:23}],18:[function(t,e,n){e.exports=/(br|input|img|area|base|col|command|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)/},{}],19:[function(t,e,n){var i=t("elenpi").r,r={doublestring:i().regExp(/^"([^"]*)"/,!1,function(t,e){t.arguments.push(e[1])}),singlestring:i().regExp(/^'([^']*)'/,!1,function(t,e){t.arguments.push(e[1])}),"float":i().regExp(/^[0-9]*\.[0-9]+/,!1,function(t,e){t.arguments.push(parseFloat(e[0],10))}),integer:i().regExp(/^[0-9]+/,!1,function(t,e){t.arguments.push(parseInt(e[0],10))}),bool:i().regExp(/^(true|false)/,!1,function(t,e){t.arguments.push("true"===e[1])})};e.exports=r},{elenpi:23}],20:[function(t,e,n){function i(t){for(var e=new a,n=0,i=t.length;n<i;++n){var r=t[n];if(!e[r.method])throw new Error("no handler found in Template as : "+r.method);e[r.method].apply(e,r.arguments)}return e}var r=t("elenpi"),o=r.r,s=r.Parser,a=t("../template"),u=t("./primitive-argument-rules"),l={templates:o().space().zeroOrMore("calls",o().rule("template"),o().regExp(/^\s*\.\s*/)).done(function(t,e){var n;return e.calls&&(n=i(e.calls)),n&&e.arguments?(e.arguments.push(n),delete e.calls):e.calls=n,t}),template:o().regExp(/^[\w-_]+/,!1,function(t,e){t.method=e[0],t.arguments=[]}).zeroOrOne(null,o().regExp(/^\s*\(\s*/).zeroOrMore(null,o().oneOf(["integer","float","bool","singlestring","doublestring","templates"]),o().regExp(/^\s*,\s*/)).regExp(/^\s*\)/))};for(var c in u)l[c]=u[c];var h=new s(l,"templates"),d={};h.parseTemplate=function(t){if(void 0!==d[t])return d[t].calls;var e=d[t]=h.parse(t);return e!==!1&&e.calls},e.exports=h},{"../template":21,"./primitive-argument-rules":19,elenpi:23}],21:[function(t,e,n){"use strict";function i(t){this.__yTemplate__=!0,t?t.forEach?this._queue=t:t.__yLexem__?this._queue=[t]:this._queue=t._queue.slice():this._queue=[]}function r(){return new i}function o(t,e,n,i,r){return r?t._queue.push({__yLexem__:!0,type:e,handler:n,args:i,suspendAfter:r}):t._queue.push({__yLexem__:!0,type:e,handler:n,args:i}),t}function s(t,e){return Array.prototype.slice.call(t,e)}function a(t,e){var n=r();for(var i in t)n[e](i,t[i]);return n}function u(t){for(var e=r(),n=Object.keys(t),i=0,o=n.length;i<o;i++){var s=n[i],u=t[s];switch(s){case"style":e.use(a(u,"css"));break;case"classes":e.use(a(u,"cl"));break;case"value":e.val(u);break;case"disabled":e.disabled(u);break;case"visible":e.visible(u);break;default:e.attr(s,u)}}return e}var l=t("./utils"),c=t("./interpolable").interpolable,h=(t("./context").Context,t("./parsers/listener-call"));i.prototype={context:function(t,e,n){return o(this,"context",t,e,n)},exec:function(t,e,n){return"object"==typeof t?o(this,"custom",t,e,n):o(this,"*",t,e,n)},set:function(t,e){var n=arguments.length;return this.context(function(i){2===n?i.set(t,e):i.set(t)})},setAsync:function(t,e){return this.context(function(n){n.setAsync(t,e)})},dependent:function(t,e,n){return this.context(function(i){i.dependent(t,e,n)})},push:function(t,e){return this.context(function(n){n.push(t,e)})},pushAsync:function(t,e){return this.context(function(n){n.pushAsync(t,e)})},toggle:function(t){return this.context(function(e){e.toggle(t)})},toggleInArray:function(t,e){return this.context(function(n){n.toggleInArray(t,e)})},del:function(t){return this.context(function(e){e.del(t)})},newContext:function(t,e){return this.exec("newContext",[t,e])},"with":function(t,e){return this.exec("with",[t,e])},subscribe:function(t,e,n){return this.context(function(i){i.subscribe(t,e,n)})},toMethods:function(t,e){return this.context(function(n){n.toMethods(t,e)})},onAgora:function(t,e){return this.context(function(n){n.onAgora(t,e)})},on:function(t,e){return"string"==typeof e&&(e=h.parseListener(e)),this.exec("on",[t,e])},once:function(t,e){return"string"==typeof e&&(e=h.parseListener(e)),this.exec("once",[t,e])},each:function(t,e,n,i){if(!e)throw new Error("yamvish each methods needs a template. (path : "+t+")");return e="string"==typeof e?r().use(e):e,n&&(n="string"==typeof n?r().use(n):n),this.exec("each",[t,e,n,i])},_each:function(t,e,n){if(t.__yTemplate__)for(var i=t._lexems,r=0,o=i.length;r<o;++r)e.call(n||this,i[r],r);else t.forEach(e,n||this);return this},eachTemplates:function(t,e){return this.exec("eachTemplates",[t,e])},"if":function(t,e,n){return e="string"==typeof e?r().use(e):e,n&&(n="string"==typeof n?r().use(n):n),this.exec("if",[c(t),e,n])},use:function(t){if(!t)return this;if(t.__yLexem__)return this._queue.push(t),this;var e=s(arguments,1);if("string"==typeof t&&(t=t.split(":"),"@"===t[0][0]))return t[0]=t[0].substring(1),this.container(r().exec("useFromContext",[t,e]));var n=t.forEach?i.getAPIMethod(t):t;return n.__yTemplate__?this._queue=this._queue.concat(n._queue):n.apply(this,e),this},client:function(t){return t=t.__yTemplate__?t:r().use(t),this.exec("client",[t])},server:function(t){return t=t.__yTemplate__?t:r().use(t),this.exec("server",[t])},suspendUntil:function(t){return this.exec("suspendUntil",[c(t),this._queue.length+1,this],!0)},log:function(t){return this.exec("log",[t])},dom:function(t,e,n){return o(this,"dom",t,e,n)},string:function(t,e,n){return o(this,"string",t,e,n)},firstPass:function(t,e,n){return o(this,"firstPass",t,e,n)},secondPass:function(t,e,n){return o(this,"secondPass",t,e,n)},attr:function(t,e){return this.exec("attr",[t,"undefined"!=typeof e?c(e):void 0])},prop:function(t,e){return this.exec("prop",[t,"undefined"!=typeof e?c(e):void 0])},data:function(t,e){return this.exec("data",[t,"undefined"!=typeof e?c(e):void 0])},id:function(t){return this.attr("id",t)},disabled:function(t){return this.exec("prop",["disabled",c(t)])},val:function(t){var e;return"string"==typeof t&&(t=c(t),t.__interpolable__&&(e=t.assertSingleDependency().firstDependency())),this.exec("val",[e,t])},html:function(t){return t=c(t),this.dom(function(e,n){var i,r=t,o=function(t){var e;i&&(e=i[i.length-1].nextSibling,i.forEach(function(t){t.parentNode&&t.parentNode.removeChild(t)})),i=l.insertHTML(t,n,e)};t.__interpolable__&&(r=t.output(e),n.binds=n.binds||[],t.subscribeTo(e,function(t){o(t)},n.binds)),o(r)}).string(function(e,n){var i=t.__interpolable__?t.output(e):t;i&&"<"!==i[0]&&(i="<p>"+i+"</p>"),n.children+=i})},contentEditable:function(t,e,n,i,r){var o;return 1===arguments.length&&"object"==typeof t&&(e=t.flag,n=t.type,i=t.eventName,r=t.onUpdate,t=t.value),"string"==typeof r&&(r=h.parseListener(r)),e&&(e=c(e)),"string"==typeof t&&(t=c(t),t.__interpolable__&&(o=t.assertSingleDependency().firstDependency())),this.exec("contentEditable",[o,t,e,n||"text",i||"input",r])},setClass:function(t,e){return e="undefined"==typeof e||c(e),this.exec("setClass",[c(t),e])},css:function(t,e){return this.exec("css",[t,c(e)])},visible:function(t){return this.exec("visible",[c(t)])},text:function(t){return this.exec("text",[c(t)])},tag:function(t,e){var n,i=!(!e||"object"!=typeof e||e.__yTemplate__);n=i?u(e):r();for(var o=i?2:1,s=arguments.length;o<s;++o)arguments[o]&&(arguments[o].__yTemplate__?n.use(arguments[o]):n.text(arguments[o]));return this.exec("tag",[t,n])},raw:function(t){return this.exec("raw",[t])},br:function(){return this.exec("br")},a:function(t){var e=s(arguments,1);return e.unshift("a","string"==typeof t?r().attr("href",t):t),this.tag.apply(this,e)},img:function(t){var e=s(arguments,1);return e.unshift("img","string"==typeof t?r().attr("src",t):t),this.tag.apply(this,e)},input:function(t,e){var n;if("string"==typeof t){n=s(arguments,2);var i=r().attr("type",t);e&&i.val(e),n.unshift("input",i)}else n=s(arguments);return this.tag.apply(this,n)},textarea:function(t,e,n){return this.tag("textarea",t,r().val(e).text(e).use(n))},h:function(t){var e=s(arguments,1);return e.unshift("h"+t),this.tag.apply(this,e)},space:function(){return this.exec("text",[" "])},nbsp:function(){return this.exec("text",[" "])},select:function(t,e,n){if(t=c(t),!t.__interpolable__)throw new Error("Template.select : first argument should be interpolable with single dependency.");var i=t.assertSingleDependency().firstDependency();return this.tag("select",r().attr("name",i).each(e,r().option("{{  val }}",r().text("{{ label || val }}").prop("selected","{{ val === $parent."+i+" }}")))["if"](t.__interpolable__,r().on("change",function(t){var e=t.target,n=e.options[e.selectedIndex].value;this.get(i)!==n&&this.set(i,n)})),n)},option:function(t,e){return this.tag("option",r().val(t),e)},cssLink:function(t){return this.tag("link",r().attr("href",t).attr("rel","stylesheet"))},container:function(t,e){return t.__yTemplate__&&(e=t,t={}),this._queue.push({type:"*",handler:"container",args:[t,e],asContainer:!0}),this},view:function(t,e){return t.__yTemplate__&&(e=t,t={}),this.container(r().newContext(t.data,t.parent,t.path).use(e))},lateMount:function(t,e){return"string"==typeof e&&(e=r().use(e)),this.exec("lateMount",[t,e])},agoraView:function(t,e){return"string"==typeof e&&(e=r().use(e)),this.exec("agoraView",[t,e])},mountIf:function(t,e,n){return e="string"==typeof e?r().use(e):e,n&&(n="string"==typeof n?r().use(n):n),this.exec("mountIf",[c(t),e,n])},"switch":function(t,e,n,i){1==arguments.length&&(e=t.map,n=t.destructOnSwitch,i=t.sequencedSwitch,t=t.xpr);for(var o in e)"string"==typeof e[o]&&(e[o]=r().use(e[o]));return this.exec("switch",[c(t),e,n,i])},mountHere:function(t){return this.exec("mountHere",[t])},addWitness:function(t){return this.dom(function(e,n,i,r){n.addWitness(t)})}},i.prototype.cl=i.prototype.setClass,["div","span","ul","li","button","p","form","table","tr","td","th","section","code","pre","q","blockquote","nav","article","header","footer","aside","label","strong"].forEach(function(t){i.prototype[t]=function(){var e=s(arguments);return e.unshift(t),this.tag.apply(this,e)}}),["click","blur","focus","submit","mouseover","mousedown","mouseup","mouseout","touchstart","touchend","touchcancel","touchleave","touchmove","drop","dragover","dragstart"].forEach(function(t){i.prototype[t]=function(e,n){return"string"==typeof e&&(e=h.parseListener(e)),this.dom(function(i,r,o,s){r.addEventListener(t,function(t){t.targetContainer=s,t.context=i,t.originalNode=r,t.originalTarget||(t.originalTarget=r),e.call(i,t)},n)})}}),[1,2,3,4,5].forEach(function(t){i.prototype["h"+t]=function(){return this.h.apply(this,[t].concat([].slice.call(arguments)))}}),i.prototype.clickToAgora=function(){var t=[].slice.call(arguments);return this.dom(function(e,n,i,r){n.addEventListener("click",function(i){"A"===n.tagName&&i.preventDefault(),e.toAgora.apply(e,t)})})},l.parseAttrMap=u,e.exports=i},{"./context":7,"./interpolable":10,"./parsers/listener-call":17,"./utils":22}],22:[function(t,e,n){var i=e.exports={toBinds:function(t,e){t.binds=nodes.binds||[],t.binds.push(e)}},r=t("nomocas-utils/lib/object-utils");r.shallowMerge(r,i)},{"nomocas-utils/lib/object-utils":28}],23:[function(t,e,n){!function(){function t(e,n,i,r,o){"string"==typeof n&&(n=r.rules[n]);for(var s=n._queue,a=0,u=s.length;a<u;++a){var l=s[a];if(e=l.__lexer__?t(e,l,i,r,o):l.call(r,e,i,o),e===!1)return!1;o.soFar=e.length}return e}function n(){this._queue=[],this.__lexer__=!0}var i=/^[\s\n\r]+/;n.prototype={done:function(t){return this._queue.push(t),this},log:function(t){return t=t||"",this.done(function(e,n,i){return console.log("elenpi.log : ",t,e,n),e})},regExp:function(t,e,n){return this.done(function(i,r,o){if(!i)return!!e&&i;var s=t.exec(i);return s?(n&&("string"==typeof n?r[n]=s[0]:n.call(this,r,s,o)),i.substring(s[0].length)):!!e&&i})},"char":function(t,e){return this.done(function(n,i){return!!n&&(n[0]===t?n.substring(1):!!e&&n)})},xOrMore:function(e,n,i,r){return r=r||0,this.done(function(o,s,a){for(var u=[],l=!0,c=0;l&&o;){var h=e?this.createDescriptor?this.createDescriptor():{}:s;l=t(o,n,h,this,a),l!==!1&&(c++,o=l,h.skip||u.push(h),i&&o&&(l=t(o,i,h,this,a),l!==!1&&(o=l)))}return!(c<r)&&(e&&u.length&&(s[e]=u),o)})},zeroOrMore:function(t,e,n){return this.xOrMore(t,e,n,0)},oneOrMore:function(t,e,n){return this.xOrMore(t,e,n,1)},zeroOrOne:function(e,n){return 1===arguments.length&&(n=e,e=null),this.done(function(i,r,o){if(!i)return i;var s=e?this.createDescriptor?this.createDescriptor():{}:r,a=t(i,n,s,this,o);return a!==!1&&(e&&(r[e]=s),i=a),i})},oneOf:function(e,n,i){return 1===arguments.length&&(n=e,e=null),this.done(function(r,o,s){if(!r)return!1;for(var a=0;a<n.length;){var u=e?this.createDescriptor?this.createDescriptor():{}:o,l=t(r,n[a],u,this,s);if(l!==!1)return e&&(o[e]=u),l;a++}return!!i&&r})},rule:function(e){return this.done(function(n,i,r){var o=this.rules[e];if(!o)throw new Error("elenpi.Rule :  rules not found : "+e);return t(n,o,i,this,r)})},skip:function(){return this.done(function(t,e){return e.skip=!0,t})},space:function(t){return this.done(function(e,n){if(!e)return!t&&e;var r=(this.rules.space||i).exec(e);return r?e.substring(r[0].length):!t&&e})},end:function(t){return this.done(function(e,n){return(!e||!t)&&e})}};var r=function(t,e){this.rules=t,this.defaultRule=e};r.prototype={exec:function(e,n,i,r){return r=r||{},i||(i=this.rules[this.defaultRule]),t(e,i,n,this,r)},parse:function(t,e,n){n=n||{};var i=this.createDescriptor?this.createDescriptor():{},r=this.exec(t,i,e,n);if(r===!1||r&&r.length>0){var o=t.length-n.soFar;return console.error("elenpi parsing failed : (pos:"+o+") near ...",t.substring(o,o+50)),
!1}return i}};var o={r:function(){return new n},Rule:n,Parser:r};"undefined"!=typeof e&&e.exports?e.exports=o:this.elenpi=o}()},{}],24:[function(t,e,n){e.exports={includes:function(t,e){return t.some(function(t){return t===e})},remove:function(t,e){for(var n=0,i=t.length;n<i;++n)if(t[n]===e)return void t.splice(n,1)},randomize:function(t){return t?t.sort(function(){return.5-Math.random()}):null},insertAfter:function(t,e,n){var i=t.indexOf(e);if(i===-1)throw new Error("utils.array.insertAfter : ref not found.");i===t.length-1?t.push(n):t.splice(i+1,0,n)},insertBefore:function(t,e,n){var i=t.indexOf(e);if(i===-1)throw new Error("utils.array.insertAfter : ref not found.");t.splice(i,0,n)}}},{}],25:[function(t,e,n){function i(){this._async={count:0,errors:[],successes:[],fails:[],callbacks:[]}}function r(t){t._async.count--,t._async.count<=0&&o(t)}function o(t){for(var e=t._async,n=e.errors.length?e.fails:e.successes,i=e.errors.length?e.errors:t,r=0;r<n.length;r++)n[r](1===i.length?i[0]:i);t.emit&&t.emit("stabilised",t),e.successes=[],e.fails=[],e.errors=[]}function s(t,e){t&&t(),r(e)}var a=t("./emitter");i.prototype=new a;var u={waiting:function(t){this._async.count++;var e=this,n=t.then(function(t){return r(e),t},function(t){throw e.env&&e.env.data.debug&&!e.parent&&console.trace("async waiting error : ",t),e._async.errors.push(t),r(e),t});return this.parent&&this.parent.waiting&&this.parent.waiting(n),n},delay:function(t,e){this._async.count++;var n=setTimeout(s,e,t,this);return this.parent&&this.parent.delay&&this.parent.delay(null,e),n},stabilised:function(){if(0===this._async.count)return Promise.resolve(this);var t=this._async,e=this;return new Promise(function(n,i){t.successes.push(function(){n(e)}),t.fails.push(i)})}};for(var l in u)i.prototype[l]=u[l];e.exports=i},{"./emitter":26}],26:[function(t,e,n){var i=function(){};i.prototype={on:function(t,e,n){return t="object"==typeof t?t.type:t,this._events=this._events||{},(this._events[t]=this._events[t]||[]).push({fct:e,args:n}),this},off:function(t,e){if(t="object"==typeof t?t.type:t,!this._events||t in this._events==!1)return this;for(var n=this._events[t],i=0,r=n.length;i<r;++i)if(n[i].fct===e){this._events[t].splice(i,1);break}return this},once:function(t,e,n){this._events=this._events||{};var i=function(){this.off(t,i),e.apply(this,arguments)};return(this._events[t]=this._events[t]||[]).push({fct:i,args:n}),this},emit:function(t){if(!this._events||t in this._events==!1||!this._events[t].length)return this;for(var e=this._events[t].slice(),n=[].slice.call(arguments,1),i=0,r=e.length;i<r;i++)e[i].fct.apply(this,e[i].args?e[i].args.concat(n):n);return this}},e.exports=i},{}],27:[function(t,e,n){function i(t,e){Error.call(this,e),this.status=t,this.message=e}i.prototype=new Error,i.prototype.toString=function(){return this.status+" - "+this.message},e.exports=i},{}],28:[function(t,e,n){e.exports={getProp:function(t,e){e.forEach||(e=e.split("."));for(var n="$this"===e[0]?1:0,i=t,r=n,o=e.length;r<o;++r)if(void 0===i||null===i||void 0===(i=i[e[r]]))return;return i},deleteProp:function(t,e){e.forEach||(e=e.split("."));var n=t,i="$this"===e[0]?1:0;for(len=e.length-1;i<len;++i)if(void 0===n||void 0===(n=n[e[i]]))return;n&&(n.forEach?n.splice(parseInt(e[i],10),1):delete n[e[i]])},setProp:function(t,e,n){e.forEach||(e=e.split(".")),"$this"===e[0]&&(e=e.slice(1));for(var i,r=t,o=0,s=e.length-1;o<s;++o)r=void 0!==r&&void 0===r[e[o]]?r[e[o]]={}:r[e[o]];return void 0!==r&&(i=r[e[o]],r[e[o]]=n),i},shallowMerge:function(t,e){for(var n in t)e[n]=t[n]},shallowCopy:function(t){if(t&&t.forEach)return t.slice();if(t&&"object"==typeof t){if(t instanceof RegExp||t instanceof Date)return t;var e={};for(var n in t)e[n]=t[n];return e}return t},copy:function(t){if(!t)return t;var e=null;if("function"==typeof t.clone)return t.clone();if(t.forEach){e=[];for(var n=0,i=t.length;n<i;++n)e.push(this.copy(t[n]))}else if(t&&"object"==typeof t){if(t instanceof RegExp||t instanceof Date)return t;e={};for(var r in t){var o=t[r];"object"==typeof o?e[r]=this.copy(o):e[r]=o}}else e=t;return e},array:t("./array-utils")}},{"./array-utils":24}],29:[function(t,e,n){var i=t("yamvish");t("yamvish-transition"),i.extendAPI("yamvish","foundation");var r=i("foundation");i.toAPI("foundation",{simpleButton:function(t,e,n){return this.button(r["if"](e,r.cl(e)).cl("button"),t,n)},hollowButton:function(t,e,n){return this.button(r["if"](e,r.cl(e)).cl("button").cl("hollow"),t,n)},aButton:function(t,e,n,i){return this.a(t,r["if"](n,r.cl(n)).cl("button"),e,i)},aHollowButton:function(t,e,n,i){return this.a(t,r["if"](n,r.cl(n)).cl("button").cl("hollow"),e,i)},closeButton:function(t){return this.button(r.cl("close-button").attr("aria-label","Close alert").attr("type","button").span(r.attr("aria-hidden","true"),"×"),t)},buttonGroup:function(t){return this.div(r.cl("button-group"),t)},smallButtonGroup:function(t){return this.div(r.cl("small").cl("button-group"),t)},icon:function(t){return this.tag("i",r.cl("fi-"+t))},badge:function(t,e){return this.span(r.cl("badge")["if"](e,r.cl(e)),t)},coloredLabel:function(t,e){return this.span(r.cl("label")["if"](e,r.cl(e)),t)},tooltip:function(t,e,n){return n=n||{},this.span(r.cl("has-tip")["if"](n.top,r.cl("top")).data("tooltip")["if"](n.noClickOpen,r.data("clickOpen",!1)).attr("aria-haspopup",!0).data("disableHover",!1).attr("tabindex","1").attr("title",t).dom(function(t,e){new Foundation.Tooltip($(e),{})}),e)},switchButton:function(t,e){return this.div(r.cl("switch").input("checkbox","",r.id(t).cl("show-for-sr").attr("name",t)).tag("label",r.cl("switch-paddle").attr("for",t).span(r.cl("show-for-sr").text(e))))},radioSwitch:function(t,e){return this.div(r.cl("switch").input("radio","",r.id(name).attr("name",t)).tag("label",r.cl("switch-paddle").attr("for",name).span(r.cl("show-for-sr"),e)))},fieldSet:function(t,e){return this.tag("fieldset",r.cl("fieldset").tag("legend",t),e)},helpText:function(t,e){return this.p(r.cl("help-text").attr("id",t),e)},radio:function(t){return t.id=t.id||t.name+t.value,this.input("radio",t.value,r.attr("name",t.name).attr("id",t.id)["if"](t.required,r.attr("required",""))).label(r.attr("for",t.id),t.text||t.value)},checkbox:function(t,e,n){return this.input("checkbox",e,r.attr("id",t)).label(r.attr("for",t),n)},inlineLabelInputRow:function(t){return this.div(r.cl("row").div(r.cl("small-3").cl("columns").label(r.cl("text-right").cl("middle").attr("for",t.id),t.label)).div(r.cl("small-9").cl("columns").input("text",t.value,r.attr("id",t.id)["if"](t.placeholder,r.attr("placeholder",t.placeholder)))))},inlineColoredLabelInputButton:function(t){return this.div(r.cl("input-group").span(r.cl("input-group-label"),t.label).input(t.type||"text",t.value||"",r.cl("input-group-field")["if"](t.required,r.prop("required",!0))["if"](t.placeholder,r.attr("placeholder",t.placeholder))).div(r.cl("input-group-button").primaryButton(t.buttonText||"Submit",r.cl("button"))))},fileUploadButton:function(t,e){return this.tag("label",r.cl("button").attr("for",t),e).input("file","",r.cl("show-for-sr").id(t))},thumbnail:function(t,e,n){return this.img(r.cl("thumbnail").attr("src",t).attr("alt",e||"image with no alternate text"),n)},roundedThumbnail:function(t,e,n){return this.img(r.cl("thumbnail").cl("rounded").attr("src",t).attr("alt",e||"image with no alternate text"),n)},background:function(t,e){return t=i.interpolable(t),e=e||"cover",this.dom(function(n,i){var r=function(t){i.style.background="url("+t+") no-repeat center center",i.style.backgroundSize=e};t.__interpolable__?(i.binds=i.binds||[],t.subscribeTo(n,r,i.binds),r(t.output(n))):r(t)})},multiLevelAccordionMenu:function(t){return this.div(r.cl("multi-level-accordion-menu").ul(r.cl("accordion-menu").data("accordionMenu",!0).cl("vertical"),t,r.dom(function(t,e){new Foundation.AccordionMenu($(e),{})})))},multiLevelAccordionSubMenu:function(t,e,n){return this.li(r.a("#",t).ul(r.cl("menu").cl("vertical").cl("sublevel-"+e),n))},multiLevelAccordionMenuLeaf:function(t,e){return this.li(r.a(t,r.cl("subitem"),e))},testAccordionMenu:function(){return this.multiLevelAccordionMenu(r.multiLevelAccordionMenuLeaf("#","hello root 1").multiLevelAccordionSubMenu("Item 1",1,r.multiLevelAccordionMenuLeaf("#","hello world").multiLevelAccordionSubMenu("Item 1.2",2,r.multiLevelAccordionMenuLeaf("#","hello world 1").multiLevelAccordionMenuLeaf("#","hello world 2").multiLevelAccordionMenuLeaf("#","hello world 3"))).multiLevelAccordionSubMenu("Item 2",1,r.multiLevelAccordionMenuLeaf("#","hello bloupi").multiLevelAccordionMenuLeaf("#","hello bloupi 2").multiLevelAccordionSubMenu("Item 2.2",2,r.multiLevelAccordionMenuLeaf("#","hello foo 1").multiLevelAccordionMenuLeaf("#","hello foo 2").multiLevelAccordionMenuLeaf("#","hello foo 3"))))},dropDown:function(t){return this.ul(r.cl("dropdown").cl("menu").data("dropdownMenu")._each(t,function(t){"tag"===t.name?this.li(new Template(t)):this.use(t)}))},productCard:function(t,e,n,i){return this.div(r.cl("product-card").cl("item-wrapper").div(r.cl("img-wrapper").a("#",r.cl("button").cl("expand").cl("add-to-cart"),"Add to Cart").a("#",r.img(n))).a("#",r.h(3,t)).h(5,e).p(i))},topBar:function(t,e){return this.div(r.cl("top-bar").div(r.cl("top-bar-left"),t).div(r.cl("top-bar-right"),e))},offCanvas:function(t,e,n){return this.div(r.cl("off-canvas-wrapper").div(r.cl("off-canvas-wrapper-inner").data("offCanvasWrapper")["if"](t,r.div(r.cl("off-canvas").cl("position-left").attr("id","offCanvas").data("offCanvas",!0).closeButton(r.data("close")),t)).div(r.cl("off-canvas").cl("position-right").attr("id","offCanvasRight").data("offCanvas",!0).data("position","right"),e)["if"](n,r.div(r.cl("off-canvas-content").data("offCanvasContent",!0).closeButton(r.data("close")),n))))},overlayPanel:function(t){return this.agoraView(t.name,r.div(r.cl("overlay-panel")["if"](!t.noBackground,r.overlayPanelBackground(t.backgroundOpacity,t.closeOnBackgroundClick)),t.content))},overlayPanelBackground:function(t,e){return this.div(r.cl("overlay-panel-background").use("transition:fade",{max:t||.5,ms:200})["if"](e,r.click(function(t){t.targetContainer.unmount(!0)})))},sidePanel:function(t){return this.overlayPanel({name:t.name,closeOnBackgroundClick:!0,content:r.div(r.cl("side-panel").cl("side-panel--"+t.side)["if"]("left"===t.side||"right"===t.side,i("transition").slideLeft({max:t.width||"300px",delay:t.delay||0,ms:t.ms||350}),i("transition").slideUp({max:t.height||"300px",delay:t.delay||0,ms:t.ms||350})).div(r.cl("side-panel-content")["if"]("left"===t.side||"right"===t.side,r.css("width",t.width),r.css("height",t.height)),t.content).closeButton(r.click(function(t){t.targetContainer.unmount(!0)})))})},callout:function(t,e,n){return this.div(r.cl("callout").cl(t).p(n||"no content!")["if"](e,r.data("closable").closeButton(r.data("close"))))},dialog:function(t,e,n){return this.div(r.cl("dialog").cl(t)["if"](n,r.closeButton(n)),e)},confirmPanel:function(){return this.overlayPanel({name:"dialog:confirm",content:r.toMethods({validate:function(t){t.preventDefault(),t.targetContainer.unmount(!0),this.data.callback(!0)},cancel:function(t){t.preventDefault(),t.targetContainer.unmount(!0),this.data.callback(!1)}}).cl("confirm-panel").warningDialog(r.h(3,"{{ title }}").p("{{ message }}").use("transition:fade",{ms:200}).div(r.cl("dialog-buttons-container").warningButton(r.click("validate"),"✓").alertButton(r.click("cancel"),"×")))})},alertPanel:function(){return this.overlayPanel({name:"dialog:alert",closeOnBackgroundClick:!0,content:r.toMethods("hide",function(t){t.preventDefault(),t.targetContainer.unmount(!0)}).cl("alert-panel").alertDialog(r.h(3,"{{ title }}").p("{{ message }}").use("transition:fade",{ms:200}).div(r.cl("dialog-buttons-container").alertButton(r.click("hide"),"✓")),r.click("hide"))})},uikitModal:function(t,e){return this.overlayPanel({name:t,closeOnBackgroundClick:!0,content:r.toMethods("hide",function(t){t.preventDefault(),t.targetContainer.unmount(!0)}).cl("uik-modal").dialog("uik-modal-dialog",r.use("transition:fade",{ms:200}).use(e),r.click("hide"))})}});var o={};["primary","secondary","success","alert","warning"].forEach(function(t){o[t+"Dialog"]=function(e,n){return this.dialog(t,e,n)},o[t+"Callout"]=function(e,n){return this.callout(t,e,n)},o[t+"Button"]=function(e,n){return this.simpleButton(e,t,n)},o[t+"AButton"]=function(e,n,i){return this.aButton(e,n,t,i)},o[t+"AHollowButton"]=function(e,n,i){return this.aHollowButton(e,n,t,i)},o[t+"HollowButton"]=function(e,n){return this.hollowButton(e,t,n)},o[t+"Badge"]=function(e){return this.badge(e,t)},o[t+"Label"]=function(e){return this.coloredLabel(e,t)}}),i.toAPI("foundation",o)},{yamvish:4,"yamvish-transition":3}]},{},[1]);